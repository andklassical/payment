<!-- Wrapper to center content -->
<div class="btc-container-wrapper">
  <div style="width:90%; max-width:520px; font-family: Arial, sans-serif; text-align:center; padding:25px; border:1px solid #ccc; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.1);">
    
    <h2 style="margin-bottom:15px; color:#333; font-size:1.4em;">Secure Your Final Registration – $104 BTC Payment</h2>
    
    <p style="color:#555; font-size:0.95em; margin-bottom:15px;">
      To access the final registration page, please send <strong>exactly $104 USD worth of Bitcoin (BTC)</strong> to the address below.
    </p>
    
    <p style="color:#555; font-size:0.95em; margin-bottom:15px;">
      <strong>Instructions:</strong><br>
      1. Send BTC using the QR code or address below.<br>
      2. Once payment is sent, enter your <strong>transaction hash</strong> or upload a <strong>proof screenshot</strong>.<br>
      3. Click <strong>Paid</strong>. Your payment will be reviewed automatically (takes only a few seconds).<br>
      4. After verification, click <strong>Continue</strong> to access the final registration page.
    </p>

    <p style="color:#d9534f; font-size:0.95em; margin-bottom:15px;">
      ⚠ Please ensure you send <strong>exactly $104 USD</strong> in BTC. Any discrepancy may delay verification.
    </p>

    <!-- BTC Address & Copy -->
    <div style="display:flex; gap:10px; flex-wrap:wrap; margin-bottom:15px; align-items:center; justify-content:center;">
      <input type="text" value="bc1qzkd2k6ydt3hm9zjz8znmsdclcvyuhp4v59lfj8" id="btcAddress" readonly 
             style="flex:1; min-width:150px; padding:12px; font-size:16px; text-align:center; border-radius:6px; border:1px solid #aaa;">
      <button id="copyBtn" style="padding:10px 15px; border:none; border-radius:6px; background:#17a2b8; color:white; cursor:pointer; transition:0.3s;">Copy</button>
    </div>

    <!-- QR Code -->
    <div id="qrcode" style="margin-bottom:20px;"></div>

    <!-- Transaction proof -->
    <input type="text" id="txProof" placeholder="Transaction hash / URL" 
           style="width:100%; padding:12px; font-size:16px; margin-bottom:10px; border-radius:6px; border:1px solid #aaa;">
    <input type="file" id="txImage" accept="image/*" style="width:100%; margin-bottom:10px; border-radius:6px;">

    <div id="previewContainer" style="margin-bottom:15px; display:none;">
      <p style="margin-bottom:5px; font-size:0.95em;">Image Preview:</p>
      <img id="imgPreview" src="" style="max-width:100%; border-radius:6px; border:1px solid #ddd;">
    </div>

    <!-- Paid Button -->
    <button id="submitBtn" style="padding:12px 25px; font-size:16px; border:none; border-radius:6px; background:#28a745; color:white; cursor:pointer; transition:0.3s;">Paid</button>

    <!-- Status -->
    <div id="status" style="margin-top:20px; font-weight:bold; font-size:16px; min-height:24px;"></div>

    <!-- Continue Button -->
    <button id="continueBtn" style="padding:12px 25px; font-size:16px; border:none; border-radius:6px; background:#007bff; color:white; cursor:pointer; display:none; margin-top:15px; transition:0.3s;">Continue</button>

  </div>
</div>

<!-- Floating success popup -->
<div id="successPopup">Payment Successful!</div>

<!-- QR Code library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<style>
  /* Wrapper centering */
  .btc-container-wrapper {
    width: 100%;
    display: flex;
    justify-content: center;
    padding: 20px 0;
  }

  /* Floating success popup style */
  #successPopup {
    display:none;
    position:fixed;
    top:20%;
    left:50%;
    transform:translateX(-50%);
    background:#28a745;
    color:white;
    padding:20px 30px;
    border-radius:12px;
    font-size:1.1em;
    font-weight:bold;
    box-shadow:0 4px 12px rgba(0,0,0,0.2);
    animation:popupAnim 0.5s ease-out;
    z-index:9999;
  }

  @keyframes popupAnim {
    0% {transform: translateX(-50%) scale(0.5);}
    80% {transform: translateX(-50%) scale(1.1);}
    100% {transform: translateX(-50%) scale(1);}
  }

  /* Responsive tweaks */
  @media(max-width:400px){
    h2{font-size:1.2em;}
    input, button{font-size:14px; padding:10px;}
  }
</style>

<script>
  // Generate QR code
  new QRCode(document.getElementById("qrcode"), {
    text: "bc1qzkd2k6ydt3hm9zjz8znmsdclcvyuhp4v59lfj8",
    width:150,
    height:150
  });

  const copyBtn = document.getElementById('copyBtn');
  const btcAddress = document.getElementById('btcAddress');
  copyBtn.addEventListener('click', () => {
    btcAddress.select();
    btcAddress.setSelectionRange(0, 99999);
    document.execCommand("copy");
    copyBtn.textContent = 'Copied!';
    setTimeout(() => { copyBtn.textContent = 'Copy'; }, 2000);
  });

  const submitBtn = document.getElementById('submitBtn');
  const status = document.getElementById('status');
  const continueBtn = document.getElementById('continueBtn');
  const txImage = document.getElementById('txImage');
  const imgPreview = document.getElementById('imgPreview');
  const previewContainer = document.getElementById('previewContainer');
  const successPopup = document.getElementById('successPopup');

  // Preview uploaded image
  txImage.addEventListener('change', () => {
    const file = txImage.files[0];
    if(file){
      const reader = new FileReader();
      reader.onload = e => {
        imgPreview.src = e.target.result;
        previewContainer.style.display = 'block';
      }
      reader.readAsDataURL(file);
    } else {
      previewContainer.style.display = 'none';
      imgPreview.src = '';
    }
  });

  function showSuccessPopup() {
    successPopup.style.display = 'block';
    setTimeout(() => {
      successPopup.style.display = 'none';
    }, 2500);
  }

  submitBtn.addEventListener('click', () => {
    const proofText = document.getElementById('txProof').value.trim();
    const proofFile = txImage.files[0];

    if(!proofText && !proofFile) {
      alert('Please enter a transaction hash or upload an image as proof.');
      return;
    }

    status.style.color = '#ffc107';
    status.textContent = 'Reviewing payment...';
    submitBtn.disabled = true;
    submitBtn.style.background = '#6c757d';
    submitBtn.style.cursor = 'not-allowed';

    setTimeout(() => {
      status.style.color = '#28a745';
      status.textContent = 'Payment Complete!';
      continueBtn.style.display = 'inline-block';
      submitBtn.style.background = '#28a745';
      submitBtn.style.cursor = 'pointer';
      showSuccessPopup(); // show floating popup
    }, 5000);
  });

  continueBtn.addEventListener('click', () => {
    window.location.href = 'https://sites.google.com/d/1KGryv9pPHShKk9OMLGGDox5InOxWrGFw/p/15cc--jInijjo69-td9Fh-Us5S4sBFxXe/edit?authuser=2';
  });
</script>